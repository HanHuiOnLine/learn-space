<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8"/>
	<title>操作符</title>
</head>
<body>
</body>
<script type="text/javascript">
	/*============前置操作符============*/
	var age = 29;
	var anotherAge = --age + 2;
	console.log(age);//28
	console.log(anotherAge);//30
	//执行前置递增和递减操作时，变量的值都是在语句被求值以前改变的，（在计算机科学领域，这种情况通常被称为副效应）
	
	//由于前置递增和递减操作与执行语句的优先级相等，因此整个语句会从左至右被求值，
	
	var num1 = 2;
	var num2 = 20;
	var num3 = --num1 + num2;//21
	var num4 = num1 + num2;//21
	
	/*===============后置操作符==============*/
	//递增和递减操作是在包含他们的语句别求值之后才执行的
	var a1 = 2;
	var a2 = 20;
	var a3 = a1-- + a2;//22
	var a4 = a1 + a2;//21
	
	/*================操作符的规则================*/
	//所有这四个操作符对任何值都适用，也就是他们不仅适用于整数，还可以用于字符串，布尔值，浮点数值，和对象，
	//在应用于不同的值时，递增和递减操作符都遵循下列规则；
	/*
		1.在应用于一个包含有效数字字符的字符串时，先将其转换成数字值，再执行加减1的操作，字符串变量变成数值变量
		2.在应用于一个不包含有效数字字符的字符串时，将变量的值设置为NaN,字符串变量变成数值变量。
		3.在应用于布尔值false时，先将其转换成0再执行加减1的操作，布尔值变量变成数值变量
		4.在应用于布尔值true时，先将其转换成1再执行加减1的操作，布尔值变量变成数值变量
		5.在应用于浮点数值时，现将其转换成1再执行加减1的操作，布尔值变量变成数值变量
		6.在应用于对象时，先调用对象的valeOf（）方法，以取得一个可供操作的值，然后对该值应用前面的规则，
		  如果结果是NaN，则调用toString()方法后载应用前面的规则
	*/
	var s1 = '2';
	var s2 = 'z';
	var b = false;
	var f = 1.1;
	var o = {
		valueOf: function () {
			return -1;
		}
	};
	s1++;//值变成3
	s2++;//值变成NaN
	b++;//值变成数值1
	f--;//值变成0.10000000000009（由于浮点舍入错误所致）
	o--;//值变成-2
	
	/*===================一元加减操作符===================*/
	var ss1 = '01';
	var ss2 = '1.1';
	var ss3 = 'z';
	var bb = false;
	var ff = 1.1;
	var oo = {
		valueOf: function () {
			return -1;
		}
	};
	ss1 = +ss1;//值变为1
	ss2 = +ss2;//值变为1.1
	ss3 = +ss3;//值变为NaN
	bb = +bb;//值变为0
	ff = +ff;//值未变，仍然是1.1
	oo = +oo;//值变成数值-1
	oo = -oo;//值变成1
	
	/*========================位操作符=======================*/
	
	//ECMAScript中所有数值都以IEEE-754 64位格式存储，但位操作符并不直接操作64位的值，而是先将64位的值转换成32位的整数
	//然后执行操作，最后再将结果转换成64位
	
	/*
	对于有符号的整数，32位中的前31位用于表示整数的值，第32位用于表示数值的符号，0表示整数，1表示负数，这个表示符号的位
	叫做符号位，符号位的值决定了其他位数值的格式，其中，整数以纯二进制格式存储，31位中的每一位都表示2的幂，第一位（叫做位0）
	表示2的0次幂，第二位表示2的一次幂，以此类推，没有用到的位以0填充，即忽略不计，例如数值18的二进制表示是00000000000010010
	或者更简洁的10010，这是5个有效位（2^4x1+2^3x0+2^2x0+2^1x1+2^0x0）
	
	负数同样以二进制编码存储，但是用的格式是二进制补码，计算衣蛾数值的二进制补码，需要进过下列三个步骤
	1.求这个数值绝对值的二进制码，（例如-18的二进制补码，先求18的二进制码）
	2.求二进制反码。即将0替换成1，将1替换成0
	3.得到的二进制反码加1
	例如-18：
	0000 0000 0000 0000 0000 0000 0001 0010
	然后求其二进制反码
	1111 1111 1111 1111 1111 1111 1110 1101
	最后，二进制反码加1
	1111 1111 1111 1111 1111 1111 1110 1101
	                                      1
	1111 1111 1111 1111 1111 1111 1110 1110
	这样就得到了-18的二进制表示，需要注意的是，在处理有符号整数时，是不能访问位31的
	*/
	var minusNum = -18;
	console.log(minusNum.toString(2));//'-10010'
	
	/*=======================按位非======================*/
	var noNum1 = 25;
	var noNum2 = ~num1;
	console.log(noNum2);//-26
	//按位非操作的本质：操作数的负值减1
	
	/*=======================按位与======================*/
	
	/*
	从本质上讲，按位与操作就是将两个数值的每一位对其，然后根据下表中的规则，对相同位置上的两个数执行AND操作
		第一个数值的位    第二个数值的位      结果
		      1                 1               1
			  1                 0               0
			  0                 1               0
			  0                 0               0
	简而言之，按位与操作只在两个数值的对应位都是1时才返回1，任何一位是0，结果都是0		  
	*/
	var result = 25 & 3;
	console.log(result);//1
	/*
	25 = 0000 0000 0000 0000 0000 0000 0001 1001
	3  = 0000 0000 0000 0000 0000 0000 0000 0011
	AND= 0000 0000 0000 0000 0000 0000 0000 0001 
	*/
	
	/*=======================按位或======================*/
	
	//规则
	/*
		第一个数值的位    第二个数值的位    结果
		       1                  1           1
			   1                  0           1
			   0                  1           1
			   0                  0           0	   
	*/
	
	var result1 = 25 | 3;
	console.log(result1);//27
	/*
	25 = 0000 0000 0000 0000 0000 0000 0001 1001
	3  = 0000 0000 0000 0000 0000 0000 0000 0011
	or = 0000 0000 0000 0000 0000 0000 0001 1011
	*/
	
	/*=======================按位异或======================*/
	//规则
	/*
			第一个数值的位   第二个数值的位  结果
			       1                1          0
                   1                0          1
                   0                1          1
                   0                0          0
			只有一个1时返回1，其他的返回0
	*/
	var result2 = 25 ^ 3;
	console.log(result2);//26
	/*
	25 = 0000 0000 0000 0000 0000 0000 0001 1001
	3  = 0000 0000 0000 0000 0000 0000 0000 0011
	xor= 0000 0000 0000 0000 0000 0000 0001 1010
	*/
	
	/*=========================左移===========================*/
	//这个操作符会将数值的所有位向左移动指定的位数
	var oldValue = 2;//等于二进制的10
	var newValue = oldValue << 5;//等于二进制的1000000，十进制的64
	//注意，在向左移位后，原数值右侧多了5个空位，左移操作会以0来填充这些空位，
	//左移不会影响操作数的符号位
	
	/*==========================有符号的右移=========================*/
	//这个操作会将数值像右移动，但保留符号位（即正负号标记）
	//同样，在移位过程中，原数值中也会出现空位，只不过这次的空位出现在原数值的左侧，符号位的右侧
	
	/*==========================无符号的右移=========================*/
	//这个操作符会将数值的所有32位都像右移动，对正数来说，无符号右移的结果与有符号右移相同，
	//但是对负数来说，首先，无符号右移是以0来填充空位，而不是像有符号右移那样以符号位的值来填充空位
	//其次，无符号右移操作符会把负数的二进制码当成正数的二进制码，而且，由于负数以其绝对值的二进制补码形式表示，因此
	//就会导致无符号右移后的结果非常之大
	var oldValue1 = -64;//等于二进制的111111111111111111111111100000
	var newValue1 = oldValue1 >>> 5;//等于十进制的134217726
	
</script>
</html>